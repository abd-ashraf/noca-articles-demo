<mat-toolbar color="primary">
  <span>Articles</span>
  <span class="spacer"></span>
  <a mat-raised-button color="accent" routerLink="new">Create</a>
</mat-toolbar>

<div class="content">
  <app-articles-filter-bar
    (filterChanged)="onFilterChanged($event)"
  ></app-articles-filter-bar>

  <mat-progress-spinner
    *ngIf="loading"
    mode="indeterminate"
    class="loading-spinner"
  ></mat-progress-spinner>

  <table
    mat-table
    [dataSource]="articles"
    class="mat-elevation-z8"
    matSort
    (matSortChange)="onSortChange($event)"
    *ngIf="!loading"
  >
    <!-- ID -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef>ID</th>
      <td mat-cell *matCellDef="let article">{{ article.id }}</td>
    </ng-container>

    <!-- Article Number -->
    <ng-container matColumnDef="articleNumber">
      <th mat-header-cell *matHeaderCellDef>Number</th>
      <td mat-cell *matCellDef="let article">{{ article.articleNumber }}</td>
    </ng-container>

    <!-- Name -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let article">{{ article.name }}</td>
    </ng-container>

    <!-- Category (sortable) -->
    <ng-container matColumnDef="articleCategory">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Category</th>
      <td mat-cell *matCellDef="let article">{{ article.articleCategory }}</td>
    </ng-container>

    <!-- Bicycle Category -->
    <ng-container matColumnDef="bicycleCategory">
      <th mat-header-cell *matHeaderCellDef>Bicycle Category</th>
      <td mat-cell *matCellDef="let article">
        {{ article.bicycleCategory?.join(", ") }}
      </td>
    </ng-container>

    <!-- Material -->
    <ng-container matColumnDef="material">
      <th mat-header-cell *matHeaderCellDef>Material</th>
      <td mat-cell *matCellDef="let article">{{ article.material }}</td>
    </ng-container>

    <!-- Net Weight (sortable) -->
    <ng-container matColumnDef="netWeightGrams">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Net Weight (g)</th>
      <td mat-cell *matCellDef="let article">{{ article.netWeightGrams }}</td>
    </ng-container>

    <!-- Actions -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Actions</th>
      <td mat-cell *matCellDef="let article">
        <a mat-button color="primary" [routerLink]="[article.id, 'edit']"
          >Edit</a
        >
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr
      mat-row
      *matRowDef="let row; columns: displayedColumns; trackBy: trackById"
    ></tr>
  </table>

  @if (!loading && articles.length === 0) {
  <p>No articles found</p>
  }
</div>
